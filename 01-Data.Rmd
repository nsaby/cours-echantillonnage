Données {#data}
======================


Nous basons nos exercices sur une réalité simulée d'une valeur de carbone dans un parcelle agricole. Ce champ a été simulé en utilisant des techniques géostastitques.

L'objet correspond à un tableau comportant 3 colonnes.
les coordonnées avec `s1` et `s2`
les valeurs simulées  `sim1`

Chaque coordonnée correspond au centre d'un pixel

```{r}
champ <- read.csv('data/simulatedField_1Exp25.csv')

head(champ)

```

Il est donc facile de transformer le tableau en une grille de type `SpatialPixelsDataframe`. Pour cela, on passe par une structure de type `SpatialPointDataframe` dans un premier temps.


```{r}
champSP <- champ
# transformer en un vecteur de points
coordinates(champSP) <- c('s1','s2') 
# transformer en raster
gridded(champSP) <- TRUE
```

Voici la structure de l'objet de type sp.


```{r}
# structure de l'objet
str(champSP)
```

Il est assez simple de faire une carte avec le package `tmap`


```{r nice-fig2, fig.cap='Notre réalité: un champ aléatoire simulé avec un variogramme de type exponentiel', out.width='110%', fig.asp=.75, fig.align='center'}


tm_shape(champSP) +
  tm_raster()+
tm_layout(legend.outside = TRUE)

```


L'histogramme de la propriété ressemble à ceci:


```{r, fig.cap='Histogramme de la population', out.width='80%', fig.asp=.75, fig.align='center'}

ggplot(champ, 
       aes(x=sim1)) + 
  geom_histogram(bins = 50)

```


La moyenne vraie de la population vaut ainsi


```{r}
Moy = mean(champ$sim1)

Moy

```

